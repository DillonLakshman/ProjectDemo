{"EDITOR_STATE":{"allProjectFiles":{"c47e7775-7b7d-4f6e-b538-4ed95fc7526a":{"id":"c47e7775-7b7d-4f6e-b538-4ed95fc7526a","parent":null,"name":"ProjectDemo","type":"DIRECTORY","isDirectory":true,"children":["bc6bebf7-eaf1-4591-a6cf-5ed0e122fc43"],"isRemovable":false,"filePath":"ProjectDemo"},"bc6bebf7-eaf1-4591-a6cf-5ed0e122fc43":{"id":"bc6bebf7-eaf1-4591-a6cf-5ed0e122fc43","parent":"c47e7775-7b7d-4f6e-b538-4ed95fc7526a","name":"lambda.js","type":"LAMBDA_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"ProjectDemo/lambda.js","code":"let Swagger = require('swagger-client');\nlet fs = require('fs');\nlet request = require(\"request\");\n\n\nexports.handler = function (event, context, callback) {\n\n    let image1 = event.image1;\n\n    let buff = new Buffer(image1, 'base64');\n    fs.writeFileSync('/tmp/image1.jpg', buff);\n\n    let image2 = event.image2;\n\n    let buff2 = new Buffer(image2, 'base64');\n    fs.writeFileSync('/tmp/image2.jpg', buff2);\n\n\n    var options = {\n        method: 'POST',\n        url: 'https://apac.faceid.hyperverge.co/v1/photo/verifyPair',\n        headers: { appkey: '506505f70970ce16988f', appid: '2d9288' },\n        formData: { image1: fs.readFile('/tmp/image1.jpg'), image2: fs.readFile('/tmp/image2.jpg'), type: 'id' }\n    };\n\n    request(options, function (error, response, body) {\n        if (error) throw new Error(error);\n        console.log(body);\n    });\n\n    // Swagger.http({\n    //     url: `https://api.apixplatform.com/facematch/1.0/v1/photo/verifyPair`,\n    //     method: 'POST',\n    //     headers: { appkey: '506505f70970ce16988f', appid: '2d9288' },\n    //     formData: '{ image1: \"asdasd\", image2: \"asdasdasd\", type: \"id\" }'\n    // }).then((response) => {\n    //     console.log(response);\n    // }).catch((err) => {\n    //     // error handling goes here\n    // });\n\n\n    if (event.method == \"TOKEN\") {\n        Swagger.http({\n            url: `https://services.apixplatform.com/api-sandbox/application/token`,\n            method: 'post',\n            query: {},\n            headers: { \"Accept\": \"*/*\", \"Content-Type\": \"application/json\" },\n            body: '{\"password\":\"1qaz2wsx@\",\"userName\":\"rwijetilleke@virtusa.com\"}'\n        }).then((response) => {\n            callback(null, response.body);\n        }).catch((err) => {\n            console.log(err)\n        });\n\n    }\n\n}","triggers":[{"resourceName":"apigeuCentral1projectdemodemopost","config":{}},{"resourceName":"apigeuCentral1projectdemodemoget","config":{}}],"config":{"runtime":"nodejs8.10","timeout":60,"memory":128},"testCases":{"c456b88b-afdb-4a25-b1fd-6df63d299d76":{"id":"c456b88b-afdb-4a25-b1fd-6df63d299d76","name":"event","functionId":"bc6bebf7-eaf1-4591-a6cf-5ed0e122fc43","event":"{\n    \"image1\": \"asdasdasdasdasdasd\",\n    \"image2\": \"asdasdasdasdasdasd\",\n    \"type\": \"id\"\n}"}}}},"deletedFiles":[],"rootNode":"c47e7775-7b7d-4f6e-b538-4ed95fc7526a","openFiles":["bc6bebf7-eaf1-4591-a6cf-5ed0e122fc43"],"currentFileId":"bc6bebf7-eaf1-4591-a6cf-5ed0e122fc43","resources":{"apigeuCentral1projectdemodemoget":{"name":"apigeuCentral1projectdemodemoget","type":"API_GATEWAY","config":{"selectedRegion":"eu-central-1","apiMode":0,"apiName":"projectdemo","endpointType":"REGIONAL","resourceMode":0,"resourceName":"demo","resourcePath":"/demo","restMethod":"GET","proxyIntegration":false,"enableCORS":false,"stageMode":0,"stageName":"Prod"},"globallyEditable":false},"apigeuCentral1projectdemodemopost":{"name":"apigeuCentral1projectdemodemopost","type":"API_GATEWAY","config":{"selectedRegion":"eu-central-1","apiMode":0,"apiName":"projectdemo","endpointType":"REGIONAL","resourceMode":0,"resourceName":"demo","resourcePath":"/demo","restMethod":"POST","proxyIntegration":false,"enableCORS":false,"stageMode":0,"stageName":"Prod"},"globallyEditable":false}},"envVariables":[{"lambdaId":"all","varKey":"SIGMA_AWS_ACC_ID","varValue":null,"shouldPersist":false,"displayOnly":false,"editable":false}],"packageJSON":{"dependencies":{"swagger-client":{"name":"swagger-client","version":"3.8.21","notRemovable":false},"fs":{"name":"fs","version":"0.0.1-security"},"request":{"name":"request","version":"2.88.0"}}},"lambdaId":"bc6bebf7-eaf1-4591-a6cf-5ed0e122fc43"},"PROJECT_META":{"projectName":"ProjectDemo","projectDescription":"Demo","projectVersion":"1.0.0","projectRegion":"eu-central-1","platform":"AWS","lastSave":1547706698387},"VCS_STATE":{"provider":"GitHub","repo":{"name":"ProjectDemo","url":"https://github.com/DillonLakshman/ProjectDemo"}}}